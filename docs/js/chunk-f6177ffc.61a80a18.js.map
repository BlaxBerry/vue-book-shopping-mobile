{"version":3,"sources":["webpack:///./node_modules/core-js/internals/array-method-has-species-support.js","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./src/components/HeaderBar/HeaderBar.vue?ba5b","webpack:///./src/components/HeaderBar/HeaderBar.vue?cd27","webpack:///src/components/HeaderBar/HeaderBar.vue","webpack:///./src/components/HeaderBar/HeaderBar.vue?a93e","webpack:///./src/components/HeaderBar/HeaderBar.vue","webpack:///./src/views/Order/Order.vue?ae9a","webpack:///./src/views/Order/Order.vue?32e7","webpack:///src/views/Order/Order.vue","webpack:///./src/views/Order/Order.vue?90d8","webpack:///./src/views/Order/Order.vue"],"names":["fails","wellKnownSymbol","V8_VERSION","SPECIES","module","exports","METHOD_NAME","array","constructor","foo","Boolean","$","$filter","filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","$route","meta","title","on","onClickLeft","scopedSlots","_u","key","fn","_t","proxy","staticRenderFns","methods","$router","go","component","hasAddress","_e","$event","push","address","name","phone","_l","item","id","num","goods","price","cover_url","getTotalPrice","onSubmit","style","height","model","value","callback","$$v","showProp","expression","goOrderDetail","_v","data","list","orderID","components","HeaderBar","$toast","fail","address_id","setTimeout","path","query","init","loading","message","forbidClick","res","is_default","computed","forEach","sum","mounted"],"mappings":"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","file":"js/chunk-f6177ffc.61a80a18.js","sourcesContent":["var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderBar.vue?vue&type=style&index=0&id=5fb6b65e&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"HeaderBar\"},[_c('van-nav-bar',{attrs:{\"title\":_vm.$route.meta.title,\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_vm._t(\"right_login\")]},proxy:true}],null,true)})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"HeaderBar\">\n      <van-nav-bar \n        :title=\"$route.meta.title\" \n        left-text=\"返回\" left-arrow\n        @click-left=\"onClickLeft\">\n          <!-- 插槽 -->\n          <template #right>\n             <slot name=\"right_login\"></slot> \n          </template>\n\n      </van-nav-bar>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  methods:{\n    onClickLeft(){\n      this.$router.go(-1)\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import \"../../assets/css/HeaderBar/HeaderBar.less\";\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeaderBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HeaderBar.vue?vue&type=template&id=5fb6b65e&scoped=true&\"\nimport script from \"./HeaderBar.vue?vue&type=script&lang=js&\"\nexport * from \"./HeaderBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeaderBar.vue?vue&type=style&index=0&id=5fb6b65e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fb6b65e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=c652dc62&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"order\"}},[_c('HeaderBar'),(!_vm.hasAddress)?_c('van-contact-card',{attrs:{\"type\":\"add\"},on:{\"click\":function($event){return _vm.$router.push('/address')}}}):_vm._e(),(_vm.hasAddress)?_c('van-contact-card',{attrs:{\"type\":\"edit\",\"name\":this.address.name,\"tel\":this.address.phone},on:{\"click\":function($event){return _vm.$router.push('/address')}}}):_vm._e(),_vm._l((_vm.list),function(item){return _c('van-card',{key:item.id,attrs:{\"num\":item.num,\"price\":item.goods.price,\"title\":item.goods.title,\"thumb\":item.goods.cover_url,\"lazy-load\":true}})}),_c('van-submit-bar',{attrs:{\"price\":_vm.getTotalPrice * 100,\"button-text\":\"确定提交\"},on:{\"submit\":_vm.onSubmit}}),_c('van-popup',{style:({ height: '30%' }),attrs:{\"closeable\":\"\",\"close-icon-position\":\"top-left\",\"position\":\"bottom\"},model:{value:(_vm.showProp),callback:function ($$v) {_vm.showProp=$$v},expression:\"showProp\"}},[_c('div',{staticClass:\"btns\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"block\":\"\",\"color\":\"#42b983\"},on:{\"click\":_vm.goOrderDetail}},[_vm._v(\"微信支付\")]),_c('van-button',{attrs:{\"type\":\"primary\",\"block\":\"\",\"color\":\"#dc143c\"},on:{\"click\":_vm.goOrderDetail}},[_vm._v(\"PayPay支付\")])],1)])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"order\">\n    <!-- Order订单 -->\n    <!-- Detail 详情页 -->\n    <HeaderBar></HeaderBar>\n\n    <!-- 发货地址 -->\n    <!-- 没有地址时的新增地址 -->\n    <van-contact-card\n      type=\"add\"\n      @click=\"$router.push('/address')\"\n      v-if=\"!hasAddress\"\n    />\n    <!-- 有地址时的显示 -->\n    <van-contact-card\n      type=\"edit\"\n      :name=\"this.address.name\"\n      :tel=\"this.address.phone\"\n      @click=\"$router.push('/address')\"\n      v-if=\"hasAddress\"\n    />\n\n    <!-- 商品卡片 -->\n    <van-card\n      v-for=\"item in list\"\n      :key=\"item.id\"\n      :num=\"item.num\"\n      :price=\"item.goods.price\"\n      :title=\"item.goods.title\"\n      :thumb=\"item.goods.cover_url\"\n      :lazy-load=\"true\"\n    />\n\n    <!-- 提交订单 -->\n    <van-submit-bar\n      :price=\"getTotalPrice * 100\"\n      button-text=\"确定提交\"\n      @submit=\"onSubmit\"\n    />\n\n    <!-- 支付弹出层 -->\n    <!-- 图标位置 -->\n    <van-popup\n      v-model=\"showProp\"\n      closeable\n      close-icon-position=\"top-left\"\n      position=\"bottom\"\n      :style=\"{ height: '30%' }\"\n    >\n      <div class=\"btns\">\n        <van-button type=\"primary\" block color=\"#42b983\" @click=\"goOrderDetail\"\n          >微信支付</van-button\n        >\n        <van-button type=\"primary\" block color=\"#dc143c\" @click=\"goOrderDetail\"\n          >PayPay支付</van-button\n        >\n      </div>\n    </van-popup>\n  </div>\n</template>\n\n<script>\n// 导入 头部标题栏\nimport HeaderBar from \"@/components/HeaderBar/HeaderBar.vue\";\n\n// 导入api接口\nimport {\n  // 获取订单预览（列表）\n  GetAllOrderPreview,\n  // 创建生成订单\n  CreateOrder,\n  // 支付\n  PayOrder,\n  // 查询支付状态\n  GetPayStatus,\n} from \"@/network/api.js\";\n\nexport default {\n  data() {\n    return {\n      // 购物车列表\n      list: [],\n      // address地址\n      address: [],\n      //是否有地址Address\n      hasAddress: false,\n      // 弹出层显示隐藏\n      showProp: false,\n      // 订单号\n      orderID: \"\",\n    };\n  },\n\n  components: {\n    HeaderBar,\n  },\n\n  methods: {\n    // 提交订单\n    onSubmit() {\n      // 判断添加地址Address\n      if (this.address.length == 0) {\n        // 提示信息 没添加\n        this.$toast.fail(\"请先添加收货地址\");\n      } else {\n        // 判断列表是否为空\n        if (this.list.length == 0) {\n          // 列表为空\n          // 提示信息\n          this.$toast.fail(\"不能提交一个空订单\");\n        } else {\n          // 列表不为空\n          // 创建提交订单\n          CreateOrder({\n            address_id: this.address.id,\n          }).then((res) => {\n            // 支付弹出层显示\n            setTimeout(() => {\n              this.showProp = true;\n            }, 1000);\n            // 订单ID\n            this.orderID = res.id;\n            // 支付\n            // PayOrder(this.orderID, { type: \"wechat\" }).then((res) => {\n            //   console.log(res);\n            // });\n          });\n        }\n      }\n    },\n\n    // 点击支付方式按钮\n    goOrderDetail() {\n      // 跳转到订单详情页面，并传入提交的订单ID\n      this.$router.push({\n        path: \"/orderdetail\",\n        query: { orderID: this.orderID },\n      });\n    },\n\n    //初始化\n    init() {\n      this.$toast.loading({\n        message: \"加载中...\",\n        forbidClick: true,\n      });\n\n      // 请求获取订单预览\n      // 获得 发货地址Address 和 购物车Cart内容\n      GetAllOrderPreview().then((res) => {\n        // console.log(res);\n        // 购物车数据\n        this.list = res.carts;\n        // 发货地址\n        // 过滤，获取默认地址\n        res.address.filter((item) => {\n          if (item.is_default == 1) {\n            // 显示默认（选中）的地址\n            this.address = item;\n            this.hasAddress = true;\n            // console.log(this.address);\n          } else {\n            this.hasAddress = false;\n          }\n        });\n\n        // 如果用户还没有设置 发货地址\n        if (this.address.length == 0) {\n          // console.log('还没添加地址');\n          // 提示信息 没添加\n          this.$toast.fail(\"请先添加收货地址\");\n        }\n      });\n    },\n  },\n\n  computed: {\n    // 计算总价\n    getTotalPrice() {\n      let sum = 0;\n      // 过滤筛选出 获取的list中被选中的商品\n      this.list.forEach((item) => {\n        sum += item.num * item.goods.price;\n      });\n      return sum;\n    },\n  },\n\n  mounted() {\n    // 调用初始化\n    this.init();\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n#order {\n  padding: 50px 0 100px;\n\n  .van-submit-bar {\n    padding-bottom: 50px;\n  }\n\n  .van-popup {\n    .btns {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 90%;\n      .van-button {\n        height: 50px;\n\n        &:nth-child(1) {\n          margin-bottom: 20px;\n        }\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=c652dc62&scoped=true&\"\nimport script from \"./Order.vue?vue&type=script&lang=js&\"\nexport * from \"./Order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Order.vue?vue&type=style&index=0&id=c652dc62&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c652dc62\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}